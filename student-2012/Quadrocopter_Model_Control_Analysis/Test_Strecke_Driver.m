%run quadrocopter_param
%sys = linmod('Test_Strecke')

%ss(sys.a, sys.b, sys.c, sys.d)

% sys.StateName
% 
% ans = 
% 
%     'Test_Strecke/angle_of_phi'
%     'Test_Strecke/angle_of_theta'
%     'Test_Strecke/angle_of_psi'
%     'Test_Strecke/rate_of_phi'
%     'Test_Strecke/rate_of_theta'
%     'Test_Strecke/rate_of_psi'
%     'Test_Strecke/Brushless_Motor1/Motor_Delay'
%     'Test_Strecke/Brushless_Motor2/Motor_Delay'
%     'Test_Strecke/Brushless_Motor3/Motor_Delay'
%     'Test_Strecke/Brushless_Motor4/Motor_Delay'
% a = 
%             x1      x2      x3      x4      x5      x6      x7      x8      x9     x10
%    x1        0       0       0       1       0       0       0       0       0       0
%    x2        0       0       0       0       1       0       0       0       0       0
%    x3        0       0       0       0       0       1       0       0       0       0
%    x4        0       0       0       0       0       0       0   94.06       0  -94.06
%    x5        0       0       0       0       0       0  -99.13       0   99.13       0
%    x6        0       0       0       0       0       0   54.09  -54.09   54.09  -54.09
%    x7        0       0       0       0       0       0  -5.128       0       0       0
%    x8        0       0       0       0       0       0       0  -5.128       0       0
%    x9        0       0       0       0       0       0       0       0  -5.128       0
%    x10       0       0       0       0       0       0       0       0       0  -5.128
%  
% b = 
%              u1       u2       u3       u4
%    x1         0        0        0        0
%    x2         0        0        0        0
%    x3         0        0        0        0
%    x4         0        0        0        0
%    x5         0        0        0        0
%    x6         0        0        0        0
%    x7   0.00625        0        0        0
%    x8         0  0.00625        0        0
%    x9         0        0  0.00625        0
%    x10        0        0        0  0.00625
%  
% c = 
%         x1   x2   x3   x4   x5   x6   x7   x8   x9  x10
%    y1    1    0    0    0    0    0    0    0    0    0
%    y2    0    1    0    0    0    0    0    0    0    0
%    y3    0    0    1    0    0    0    0    0    0    0
%    y4    0    0    0    1    0    0    0    0    0    0
%    y5    0    0    0    0    1    0    0    0    0    0
%    y6    0    0    0    0    0    1    0    0    0    0
%  
% d = 
%        u1  u2  u3  u4
%    y1   0   0   0   0
%    y2   0   0   0   0
%    y3   0   0   0   0
%    y4   0   0   0   0
%    y5   0   0   0   0
%    y6   0   0   0   0
%%
syms k1 k2; % Rückkoppelfaktor phi und rphi auf Motor 1
syms k3 k4; % Rückkoppelfaktor theta und rtheta auf Motor 2
syms k5 k6; % Rückkoppelfaktor phi und rphi auf Motor 3
syms k7 k8; % Rückkoppelfaktor theta und rtheta auf Motor 4
syms k9 k10 k11 k12; % Rückkopelfaktoren für rpsi auf die Motoren 1-4
syms a;
%            x1      x2      x3      x4      x5      x6      x7      x8      x9     x10
a = [        0       0       0       1       0       0       0       0       0       0;
             0       0       0       0       1       0       0       0       0       0;
             0       0       0       0       0       1       0       0       0       0;
             0       0       0       0       0       0       0   94.06       0  -94.06;
             0       0       0       0       0       0  -99.13       0   99.13       0;
             0       0       0       0       0       0   54.09  -54.09   54.09  -54.09;
             0      0.0349   0       0    0.041      0  -5.128       0       0       0;
           -0.0349   0       0     -0.041    0       0      0   -5.128       0       0;
             0     -0.0349   0       0     -0.041    0      0        0  -5.128       0;
           0.0349    0       0      0.041    0       0      0        0       0  -5.128]
         
 eig(a)
%  ans =
%  
%                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                {[0, 1], [-641/125, 1]}
%  RootOf(X2^8 + 1923/125*X2^7 + X2^6*(5409/100*k10 - 5409/100*k11 + 5409/100*k12 - 5409/100*k9 + 1232643/15625) + X2^5*(3467169/6250*k10 - 3467169/6250*k11 + 3467169/6250*k12 - 3467169/6250*k9 + 263374721/1953125) + X2^4*(2222455329/1562500*k10 - 2222455329/1562500*k11 + 2222455329/1562500*k12 - 2222455329/1562500*k9 - 25438527/5000*k10*k2 + 25438527/5000*k12*k2 + 53619417/10000*k11*k4 + 46620839/5000*k2*k4 - 25438527/5000*k10*k6 + 25438527/5000*k12*k6 + 53619417/10000*k11*k8 - 46620839/5000*k2*k8 - 46620839/5000*k4*k6 - 53619417/10000*k4*k9 + 46620839/5000*k6*k8 - 53619417/10000*k8*k9) - X2^3*(25438527/5000*k1*k10 - 25438527/5000*k1*k12 + 16306095807/625000*k10*k2 - 16306095807/625000*k12*k2 - 53619417/10000*k11*k3 - 46620839/5000*k1*k4 - 46620839/5000*k2*k3 - 34370046297/1250000*k11*k4 - 29883957799/625000*k2*k4 + 25438527/5000*k10*k5 - 25438527/5000*k12*k5 + 16306095807/625000*k10*k6 - 16306095807/625000*k12*k6 - 53619417/10000*k11*k7 + 46620839/5000*k1*k8 + 46620839/5000*k2*k7 + 46620839/5000*k3*k6 + 46620839/5000*k4*k5 - 34370046297/1250000*k11*k8 + 29883957799/625000*k2*k8 + 29883957799/625000*k4*k6 + 53619417/10000*k3*k9 + 34370046297/1250000*k4*k9 - 46620839/5000*k5*k8 - 46620839/5000*k6*k7 - 29883957799/625000*k6*k8 + 53619417/10000*k7*k9 + 34370046297/1250000*k8*k9) - X2^2*(16306095807/625000*k1*k10 - 16306095807/625000*k1*k12 - 46620839/5000*k1*k3 - 34370046297/1250000*k11*k3 - 29883957799/625000*k1*k4 - 29883957799/625000*k2*k3 + 16306095807/625000*k10*k5 - 16306095807/625000*k12*k5 + 46620839/5000*k1*k7 + 46620839/5000*k3*k5 - 34370046297/1250000*k11*k7 + 29883957799/625000*k1*k8 + 29883957799/625000*k2*k7 + 29883957799/625000*k3*k6 + 29883957799/625000*k4*k5 + 34370046297/1250000*k3*k9 - 46620839/5000*k5*k7 - 29883957799/625000*k5*k8 - 29883957799/625000*k6*k7 + 34370046297/1250000*k7*k9 + 252172118151/250000*k11*k2*k4 - 252172118151/250000*k12*k2*k4 + 252172118151/250000*k10*k2*k8 - 252172118151/250000*k11*k2*k8 + 252172118151/250000*k12*k4*k6 - 252172118151/250000*k10*k6*k8 - 252172118151/250000*k4*k6*k9 + 252172118151/250000*k6*k8*k9) + X2*(29883957799/625000*k1*k3 - 29883957799/625000*k1*k7 - 29883957799/625000*k3*k5 + 29883957799/625000*k5*k7 - 252172118151/250000*k1*k11*k4 - 252172118151/250000*k11*k2*k3 + 252172118151/250000*k1*k12*k4 + 252172118151/250000*k12*k2*k3 - 252172118151/250000*k1*k10*k8 - 252172118151/250000*k10*k2*k7 + 252172118151/250000*k1*k11*k8 + 252172118151/250000*k11*k2*k7 - 252172118151/250000*k12*k3*k6 - 252172118151/250000*k12*k4*k5 + 252172118151/250000*k10*k5*k8 + 252172118151/250000*k10*k6*k7 + 252172118151/250000*k3*k6*k9 + 252172118151/250000*k4*k5*k9 - 252172118151/250000*k5*k8*k9 - 252172118151/250000*k6*k7*k9) - 252172118151/250000*k5*k7*k9 + 252172118151/250000*k3*k5*k9 + 252172118151/250000*k10*k5*k7 - 252172118151/250000*k12*k3*k5 + 252172118151/250000*k1*k11*k7 - 252172118151/250000*k1*k10*k7 + 252172118151/250000*k1*k12*k3 - 252172118151/250000*k1*k11*k3, X2)
%% 
% Wunsch-TF (STF):
% 1/(1/2^28)T^8s^8+(1/2^21)T^7s^7+(1/2^15)T^6s^6+(1/2^10)T^5s^5+(1/2^6)T^4s^4+(1/2^3)T^3s^3+(1/2)T^2s^2+Ts+1
syms s
T = 0.5
s^8+2^28*(1/2^21)/T^8*T^7*s^7+2^28*(1/2^15)/T^8*T^6*s^6+2^28*(1/2^10)/T^8*T^5*s^5+2^28*(1/2^6)/T^8*T^4*s^4+2^28*(1/2^3)/T^8*T^3*s^3+2^28*(1/2)/T^8*T^2*s^2+2^28/T^8*T*s+2^28/T^8
% ans =
%  
% s^8 + 256*s^7 + 32768*s^6 + 2097152*s^5 + 67108864*s^4 + 1073741824*s^3 + 8589934592*s^2 + 34359738368*s + 68719476736

% k10 = k12 = 605.8051
% k11 = k9 = -605.8051
